{"version":3,"mappings":";+3BAEIA,EAAIC,EAENC,EAAqBF,EAAE,WACDA,EAAE,q/BCDbG,EACT,2CAGJ,QAAQ,IAAI,iBAAiBA,CAAY,EAAE,EAG3C,MAAMC,EAAMC,EAAM,OAAO,CACvB,QAASF,EACT,QAAS,IACT,QAAS,CACP,eAAgB,mBAChB,OAAU,mBAEd,CAAC,EAGDC,EAAI,aAAa,QAAQ,IACtBE,GAAW,CACV,MAAMC,EAAQ,aAAa,QAAQ,OAAO,EAC1C,OAAIA,IACFD,EAAO,QAAQ,cAAgB,UAAUC,CAAK,IAEzCD,CAAA,EAERE,GACQ,QAAQ,OAAOA,CAAK,CAE/B,EAGAJ,EAAI,aAAa,SAAS,IACvBK,GAAaA,EACbD,IACKA,EAAM,SAEJA,EAAM,SAAS,SAAW,KAE5B,aAAa,WAAW,OAAO,EAC/B,aAAa,WAAW,MAAM,EAE1B,OAAO,SAAS,WAAa,WAC/B,OAAO,SAAS,KAAO,WAEhBA,EAAM,SAAS,QAAU,KAClC,QAAQ,MAAM,sBAAuBA,EAAM,SAAS,IAAI,EAEjDA,EAAM,QAEf,QAAQ,MAAM,wCAAyCA,EAAM,OAAO,EAGpE,QAAQ,MAAM,oCAAqCA,EAAM,OAAO,EAE3D,QAAQ,OAAOA,CAAK,EAE/B,ECzDA,MAAME,EAAcC,gBAAA,EAEPC,EAAe,CAAC,CAAE,SAAAC,KAAe,CAC5C,KAAM,CAACC,EAAMC,CAAO,EAAIC,WAAS,IAAI,EAC/B,CAACC,EAASC,CAAU,EAAIF,WAAS,EAAI,EAG3CG,YAAU,IAAM,EACG,SAAY,CAG3B,GAAI,CAFU,aAAa,QAAQ,OAAO,EAE9B,CACVD,EAAW,EAAK,EAChB,OAGF,GAAI,CACF,MAAMT,EAAW,MAAML,EAAI,IAAI,UAAU,EACzCW,EAAQN,EAAS,KAAK,IAAI,QACnBD,EAAO,CACd,QAAQ,MAAM,8BAA+BA,CAAK,EAClD,aAAa,WAAW,OAAO,SACjC,CACEU,EAAW,EAAK,EAClB,GAGF,CAAS,EACR,EAAE,EAGL,MAAME,EAAQ,MAAOC,EAAOC,IAAa,SACvC,GAAI,CACF,MAAMb,EAAW,MAAML,EAAI,KAAK,cAAe,CAAE,MAAAiB,EAAO,SAAAC,EAAU,EAC5D,CAAE,MAAAf,EAAO,KAAAO,GAASL,EAAS,KAEjC,oBAAa,QAAQ,QAASF,CAAK,EACnC,aAAa,QAAQ,OAAQ,KAAK,UAAUO,CAAI,CAAC,EAEjDC,EAAQD,CAAI,EACL,CAAE,QAAS,GAAK,OAChBN,EAAO,CACd,eAAQ,MAAM,2BAA4BA,CAAK,EACxC,CACL,QAAS,GACT,UAASe,GAAAC,EAAAhB,EAAM,WAAN,YAAAgB,EAAgB,OAAhB,YAAAD,EAAsB,UAAW,0BAC5C,CACF,EAIIE,EAAW,MAAOC,GAAa,SACnC,GAAI,CACF,MAAMjB,EAAW,MAAML,EAAI,KAAK,iBAAkBsB,CAAQ,EACpD,CAAE,MAAAnB,EAAO,KAAAO,GAASL,EAAS,KAEjC,oBAAa,QAAQ,QAASF,CAAK,EACnC,aAAa,QAAQ,OAAQ,KAAK,UAAUO,CAAI,CAAC,EAEjDC,EAAQD,CAAI,EACL,CAAE,QAAS,GAAK,OAChBN,EAAO,CACd,eAAQ,MAAM,sBAAuBA,CAAK,EACnC,CACL,QAAS,GACT,UAASe,GAAAC,EAAAhB,EAAM,WAAN,YAAAgB,EAAgB,OAAhB,YAAAD,EAAsB,UAAW,gCAC5C,CACF,EAIII,EAAS,IAAM,CACnB,aAAa,WAAW,OAAO,EAC/B,aAAa,WAAW,MAAM,EAC9BZ,EAAQ,IAAI,EACZ,OAAO,SAAS,KAAO,UAInBa,EAAkB,IACf,CAAC,CAACd,EAILe,EAAU,KACPf,GAAA,YAAAA,EAAM,QAAS,QAGxB,OACEgB,EAAA,cAACpB,EAAY,SAAZ,CACC,MAAO,CACL,KAAAI,EACA,QAAAG,EACA,MAAAG,EACA,SAAAK,EACA,OAAAE,EACA,gBAAAC,EACA,QAAAC,CAAA,CACF,EAEC,CAACZ,GAAWJ,CAAA,CAGnB,EAGakB,EAAU,IAAM,CAC3B,MAAMC,EAAUC,aAAWvB,CAAW,EACtC,GAAI,CAACsB,EACH,MAAM,IAAI,MAAM,+CAA+C,EAEjE,OAAOA,CACT,EC/GME,EAAe,IAAM,CACzB,KAAM,CAAE,gBAAAN,EAAiB,QAAAX,CAAA,EAAYc,EAAA,EAErC,OAAId,EACKa,EAAA,cAAC,WAAI,aAAW,EAGlBF,EAAA,EAAoBE,EAAA,cAACK,EAAA,IAAO,EAAKL,EAAA,cAACM,EAAA,CAAS,GAAG,SAAS,CAChE,ECPMC,EAAS,IAAM,CACnB,KAAM,CAAE,KAAAvB,EAAM,OAAAa,EAAQ,gBAAAC,CAAA,EAAoBG,EAAA,EACpCO,EAAWC,EAAA,EAEXC,EAAe,IAAM,CACzBb,EAAA,EACAW,EAAS,QAAQ,GAGnB,OAAKV,EAAA,EAGHE,EAAA,cAACW,GAAgB,GAAG,OAAO,QAAQ,OAAO,OAAO,KAAK,UAAU,QAC9DX,EAAA,cAACY,OACCZ,EAAA,cAACW,EAAgB,MAAhB,CAAsB,GAAIE,EAAM,GAAG,KAAI,oBAExC,EACAb,EAAA,cAACW,EAAgB,OAAhB,CAAuB,gBAAc,mBAAmB,EACzDX,EAAA,cAACW,EAAgB,SAAhB,CAAyB,GAAG,oBAC3BX,EAAA,cAACc,EAAA,CAAI,UAAU,2BACZA,EAAI,KAAJ,CAAS,GAAID,EAAM,GAAG,WAAU,QAAM,EACvCb,EAAA,cAACc,EAAI,KAAJ,CAAS,GAAID,EAAM,GAAG,gBAAe,aAAW,kBAChDC,EAAI,KAAJ,CAAS,GAAID,EAAM,GAAG,YAAW,SAAO,GACxC7B,GAAA,YAAAA,EAAM,QAAS,SACdgB,EAAA,cAACc,EAAI,KAAJ,CAAS,GAAID,EAAM,GAAG,UAAS,gBAEhC,CAEJ,EACAb,EAAA,cAACc,EAAA,KACCd,EAAA,cAACO,EAAO,KAAP,CAAY,UAAU,QAAO,UACrBvB,GAAA,YAAAA,EAAM,WAAY,SAC3B,EACAgB,EAAA,cAACe,EAAA,CAAO,QAAQ,gBAAgB,QAASL,GAAc,eAEvD,CACF,CACF,CACF,CACF,EA9B6B,IAgCjC,ECtCMM,EAAQC,OAAK,IAAAC,EAAA,IAAM,OAAO,qBAA6B,2BAAC,EACxDC,EAAWF,OAAK,IAAAC,EAAA,IAAM,OAAO,wBAAgC,2BAAC,EAC9DE,EAASH,OAAK,IAAAC,EAAA,IAAM,OAAO,sBAAyB,2BAAC,EACrDG,EAAcJ,OAAK,IAAAC,EAAA,IAAM,OAAO,2BAA8B,2BAAC,EAC/DI,EAAUL,OAAK,IAAAC,EAAA,IAAM,OAAO,uBAA0B,2BAAC,EACvDK,EAAgBN,OAAK,IAAAC,EAAA,IAAM,OAAO,6BAAgC,2BAAC,EAMnEM,EAAiB,IACrBxB,EAAA,cAAC,OAAI,UAAU,mDAAmD,MAAO,CAAE,OAAQ,QAAQ,kBACxFyB,EAAA,CAAQ,UAAU,SAAS,KAAK,UAC/BzB,EAAA,cAAC,QAAK,UAAU,mBAAkB,wBAAsB,CAC1D,CACF,EAIF,OAAO,iBAAiB,qBAAuB0B,GAAU,CACvD,QAAQ,MAAM,qBAAsBA,EAAM,MAAM,CAClD,CAAC,EAED,SAASC,GAAM,CACb,OACE3B,EAAA,cAAC4B,EAAA,CAAO,SAAU,OAChB,cAAC9C,EAAA,KACCkB,EAAA,cAAC,OAAI,UAAU,OACbA,EAAA,cAACO,EAAA,IAAO,EACRP,EAAA,cAACY,EAAA,CAAU,UAAU,QACnBZ,EAAA,cAAC6B,WAAA,CAAS,SAAU7B,EAAA,cAACwB,EAAA,IAAe,GAClCxB,EAAA,cAAC8B,EAAA,KAEC9B,EAAA,cAAC+B,EAAA,CAAM,KAAK,SAAS,UAAS,cAACf,EAAA,IAAM,EAAI,EACzChB,EAAA,cAAC+B,EAAA,CAAM,KAAK,YAAY,QAAS/B,EAAA,cAACmB,EAAA,IAAS,EAAI,IAG/C,cAACY,EAAA,CAAM,QAAS/B,EAAA,cAACI,EAAA,IAAa,GAC5BJ,EAAA,cAAC+B,EAAA,CAAM,KAAK,IAAI,UAAS,cAACX,EAAA,IAAO,EAAI,kBACpCW,EAAA,CAAM,KAAK,UAAU,QAAS/B,EAAA,cAACoB,EAAA,IAAO,EAAI,IAC3C,cAACW,EAAA,CAAM,KAAK,eAAe,QAAS/B,EAAA,cAACqB,EAAA,IAAY,EAAI,EACrDrB,EAAA,cAAC+B,EAAA,CAAM,KAAK,WAAW,UAAS,cAACT,EAAA,IAAQ,EAAI,EAC7CtB,EAAA,cAAC+B,EAAA,CAAM,KAAK,kBAAkB,QAAS/B,EAAA,cAACuB,EAAA,IAAc,EAAI,CAC5D,EAGAvB,EAAA,cAAC+B,EAAA,CAAM,KAAK,IAAI,QACd/B,EAAA,cAAC,QAAK,UAAU,sBACd,cAAC,UAAG,4BAA0B,IAC9B,cAAC,SAAE,0DAAwD,CAC7D,EACA,CACJ,CACF,CACF,CACF,CACF,CACF,CAEJ,CC9DA,MAAMgC,GAAY,SAAS,eAAe,MAAM,EAC1CC,GAAO7D,EAAW4D,EAAS,EAEjCC,GAAK,uBACFjC,EAAM,WAAN,KACCA,EAAA,cAAC2B,MAAI,CACP,CACF","names":["m","require$$0","createRoot","API_BASE_URL","api","axios","config","token","error","response","AuthContext","createContext","AuthProvider","children","user","setUser","useState","loading","setLoading","useEffect","login","email","password","_b","_a","register","userData","logout","isAuthenticated","isAdmin","React","useAuth","context","useContext","PrivateRoute","Outlet","Navigate","Navbar","navigate","useNavigate","handleLogout","BootstrapNavbar","Container","Link","Nav","Button","Login","lazy","__vitePreload","Register","Listas","Proveedores","Insumos","ListasPrecios","LoadingSpinner","Spinner","event","App","Router","Suspense","Routes","Route","container","root"],"ignoreList":[0],"sources":["../../node_modules/react-dom/client.js","../../src/config/api.js","../../src/contexts/AuthContext.jsx","../../src/components/PrivateRoute.jsx","../../src/components/layout/Navbar.jsx","../../src/App.jsx","../../src/index.jsx"],"sourcesContent":["'use strict';\n\nvar m = require('react-dom');\nif (process.env.NODE_ENV === 'production') {\n  exports.createRoot = m.createRoot;\n  exports.hydrateRoot = m.hydrateRoot;\n} else {\n  var i = m.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;\n  exports.createRoot = function(c, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.createRoot(c, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n  exports.hydrateRoot = function(c, h, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.hydrateRoot(c, h, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n}\n","import axios from 'axios';\n\n// Configuración de la API\nconst isProduction = import.meta.env.PROD;\nexport const API_BASE_URL = isProduction \n  ? 'https://abitare-backend.onrender.com/api' \n  : 'http://localhost:5000/api';\n\nconsole.log(`API Base URL: ${API_BASE_URL}`);\n\n// Configuración de Axios\nconst api = axios.create({\n  baseURL: API_BASE_URL,\n  timeout: 10000, // 10 segundos de timeout\n  headers: {\n    'Content-Type': 'application/json',\n    'Accept': 'application/json',\n  },\n});\n\n// Interceptor para agregar el token de autenticación a las peticiones\napi.interceptors.request.use(\n  (config) => {\n    const token = localStorage.getItem('token');\n    if (token) {\n      config.headers.Authorization = `Bearer ${token}`;\n    }\n    return config;\n  },\n  (error) => {\n    return Promise.reject(error);\n  }\n);\n\n// Interceptor para manejar errores de autenticación\napi.interceptors.response.use(\n  (response) => response,\n  (error) => {\n    if (error.response) {\n      // El servidor respondió con un código de estado fuera del rango 2xx\n      if (error.response.status === 401) {\n        // Token expirado o inválido\n        localStorage.removeItem('token');\n        localStorage.removeItem('user');\n        // Redirigir a login solo si no estamos ya en la página de login\n        if (window.location.pathname !== '/login') {\n          window.location.href = '/login';\n        }\n      } else if (error.response.status >= 500) {\n        console.error('Error del servidor:', error.response.data);\n      }\n    } else if (error.request) {\n      // La solicitud fue hecha pero no se recibió respuesta\n      console.error('No se recibió respuesta del servidor:', error.request);\n    } else {\n      // Algo pasó en la configuración de la solicitud que generó un error\n      console.error('Error al configurar la solicitud:', error.message);\n    }\n    return Promise.reject(error);\n  }\n);\n\nexport default api;\n","import React, { createContext, useState, useEffect, useContext } from 'react';\nimport api from '../config/api';\n\nconst AuthContext = createContext();\n\nexport const AuthProvider = ({ children }) => {\n  const [user, setUser] = useState(null);\n  const [loading, setLoading] = useState(true);\n\n  // Verificar si hay un usuario autenticado al cargar la aplicación\n  useEffect(() => {\n    const loadUser = async () => {\n      const token = localStorage.getItem('token');\n      \n      if (!token) {\n        setLoading(false);\n        return;\n      }\n\n      try {\n        const response = await api.get('/auth/me');\n        setUser(response.data.data);\n      } catch (error) {\n        console.error('Error al cargar el usuario:', error);\n        localStorage.removeItem('token');\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    loadUser();\n  }, []);\n\n  // Iniciar sesión\n  const login = async (email, password) => {\n    try {\n      const response = await api.post('/auth/login', { email, password });\n      const { token, user } = response.data;\n      \n      localStorage.setItem('token', token);\n      localStorage.setItem('user', JSON.stringify(user));\n      \n      setUser(user);\n      return { success: true };\n    } catch (error) {\n      console.error('Error al iniciar sesión:', error);\n      return { \n        success: false, \n        message: error.response?.data?.message || 'Error al iniciar sesión' \n      };\n    }\n  };\n\n  // Registrar un nuevo usuario\n  const register = async (userData) => {\n    try {\n      const response = await api.post('/auth/register', userData);\n      const { token, user } = response.data;\n      \n      localStorage.setItem('token', token);\n      localStorage.setItem('user', JSON.stringify(user));\n      \n      setUser(user);\n      return { success: true };\n    } catch (error) {\n      console.error('Error al registrar:', error);\n      return { \n        success: false, \n        message: error.response?.data?.message || 'Error al registrar el usuario' \n      };\n    }\n  };\n\n  // Cerrar sesión\n  const logout = () => {\n    localStorage.removeItem('token');\n    localStorage.removeItem('user');\n    setUser(null);\n    window.location.href = '/login';\n  };\n\n  // Verificar si el usuario está autenticado\n  const isAuthenticated = () => {\n    return !!user;\n  };\n\n  // Verificar si el usuario es administrador\n  const isAdmin = () => {\n    return user?.role === 'admin';\n  };\n\n  return (\n    <AuthContext.Provider\n      value={{\n        user,\n        loading,\n        login,\n        register,\n        logout,\n        isAuthenticated,\n        isAdmin,\n      }}\n    >\n      {!loading && children}\n    </AuthContext.Provider>\n  );\n};\n\n// Hook personalizado para usar el contexto de autenticación\nexport const useAuth = () => {\n  const context = useContext(AuthContext);\n  if (!context) {\n    throw new Error('useAuth debe usarse dentro de un AuthProvider');\n  }\n  return context;\n};\n\nexport default AuthContext;\n","import React from 'react';\nimport { Navigate, Outlet } from 'react-router-dom';\nimport { useAuth } from '../contexts/AuthContext';\n\nconst PrivateRoute = () => {\n  const { isAuthenticated, loading } = useAuth();\n\n  if (loading) {\n    return <div>Cargando...</div>; // O un componente de carga\n  }\n\n  return isAuthenticated() ? <Outlet /> : <Navigate to=\"/login\" />;\n};\n\nexport default PrivateRoute;\n","import React from 'react';\nimport { Link, useNavigate } from 'react-router-dom';\nimport { Navbar as BootstrapNavbar, Nav, Container, Button } from 'react-bootstrap';\nimport { useAuth } from '../../contexts/AuthContext';\n\nconst Navbar = () => {\n  const { user, logout, isAuthenticated } = useAuth();\n  const navigate = useNavigate();\n\n  const handleLogout = () => {\n    logout();\n    navigate('/login');\n  };\n\n  if (!isAuthenticated()) return null;\n\n  return (\n    <BootstrapNavbar bg=\"dark\" variant=\"dark\" expand=\"lg\" className=\"mb-4\">\n      <Container>\n        <BootstrapNavbar.Brand as={Link} to=\"/\">\n          Gestión de Insumos\n        </BootstrapNavbar.Brand>\n        <BootstrapNavbar.Toggle aria-controls=\"basic-navbar-nav\" />\n        <BootstrapNavbar.Collapse id=\"basic-navbar-nav\">\n          <Nav className=\"me-auto\">\n            <Nav.Link as={Link} to=\"/listas\">Listas</Nav.Link>\n            <Nav.Link as={Link} to=\"/proveedores\">Proveedores</Nav.Link>\n            <Nav.Link as={Link} to=\"/insumos\">Insumos</Nav.Link>\n            {user?.role === 'admin' && (\n              <Nav.Link as={Link} to=\"/admin\">\n                Administración\n              </Nav.Link>\n            )}\n          </Nav>\n          <Nav>\n            <Navbar.Text className=\"me-3\">\n              Hola, {user?.username || 'Usuario'}\n            </Navbar.Text>\n            <Button variant=\"outline-light\" onClick={handleLogout}>\n              Cerrar Sesión\n            </Button>\n          </Nav>\n        </BootstrapNavbar.Collapse>\n      </Container>\n    </BootstrapNavbar>\n  );\n};\n\nexport default Navbar;\n","import React, { Suspense, lazy } from 'react';\nimport { BrowserRouter as Router, Routes, Route } from 'react-router-dom';\nimport { Container, Spinner } from 'react-bootstrap';\nimport { AuthProvider } from './contexts/AuthContext.jsx';\nimport PrivateRoute from './components/PrivateRoute.jsx';\nimport Navbar from './components/layout/Navbar.jsx';\n\n// Carga perezosa de componentes para code-splitting\nconst Login = lazy(() => import('./components/auth/Login.jsx'));\nconst Register = lazy(() => import('./components/auth/Register.jsx'));\nconst Listas = lazy(() => import('./components/Listas.jsx'));\nconst Proveedores = lazy(() => import('./components/Proveedores.jsx'));\nconst Insumos = lazy(() => import('./components/Insumos.jsx'));\nconst ListasPrecios = lazy(() => import('./components/ListasPrecios.jsx'));\n\n// Importar estilos\nimport 'bootstrap/dist/css/bootstrap.min.css';\n\n// Componente de carga\nconst LoadingSpinner = () => (\n  <div className=\"d-flex justify-content-center align-items-center\" style={{ height: '100vh' }}>\n    <Spinner animation=\"border\" role=\"status\">\n      <span className=\"visually-hidden\">Cargando aplicación...</span>\n    </Spinner>\n  </div>\n);\n\n// Agregar un manejador de errores global\nwindow.addEventListener('unhandledrejection', (event) => {\n  console.error('Error no manejado:', event.reason);\n});\n\nfunction App() {\n  return (\n    <Router basename={import.meta.env.BASE_URL}>\n      <AuthProvider>\n        <div className=\"App\">\n          <Navbar />\n          <Container className=\"mt-4\">\n            <Suspense fallback={<LoadingSpinner />}>\n              <Routes>\n                {/* Rutas públicas */}\n                <Route path=\"/login\" element={<Login />} />\n                <Route path=\"/register\" element={<Register />} />\n\n                {/* Rutas protegidas */}\n                <Route element={<PrivateRoute />}>\n                  <Route path=\"/\" element={<Listas />} />\n                  <Route path=\"/listas\" element={<Listas />} />\n                  <Route path=\"/proveedores\" element={<Proveedores />} />\n                  <Route path=\"/insumos\" element={<Insumos />} />\n                  <Route path=\"/listas-precios\" element={<ListasPrecios />} />\n                </Route>\n\n                {/* Ruta por defecto (404) */}\n                <Route path=\"*\" element={\n                  <main className=\"text-center py-5\">\n                    <h2>¡Ups! Página no encontrada</h2>\n                    <p>La página que estás buscando no existe o ha sido movida.</p>\n                  </main>\n                } />\n              </Routes>\n            </Suspense>\n          </Container>\n        </div>\n      </AuthProvider>\n    </Router>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport { createRoot } from 'react-dom/client';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport './index.css';\nimport App from './App.jsx';\n\nconst container = document.getElementById('root');\nconst root = createRoot(container);\n\nroot.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>\n);\n"],"file":"assets/index-BEBrXeq0.js"}